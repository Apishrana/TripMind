<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TripMind - Your Autonomous Travel Assistant</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚úàÔ∏è</text></svg>">
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet" href="/static/booking-styles.css">
    <link rel="stylesheet" href="/static/calendar-styles.css">
    <link rel="stylesheet" href="/static/calendar-dynamic.css">
    <link rel="stylesheet" href="/static/plan-trip-styles.css">
    <link rel="stylesheet" href="/static/auth-styles.css">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/index.global.min.js"></script>
</head>
<body>
    
    <!-- Welcome/Landing Page -->
    <div id="welcome-page" class="page active">
        <div class="welcome-container">
            <!-- Animated Background -->
            <div class="welcome-bg">
                <div class="gradient-orb orb-1"></div>
                <div class="gradient-orb orb-2"></div>
                <div class="gradient-orb orb-3"></div>
            </div>
            
            <!-- Welcome Content -->
            <div class="welcome-content">
                <div class="welcome-logo">
                    <svg class="logo-icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 10 L90 30 L90 70 L50 90 L10 70 L10 30 Z" fill="url(#logoGradient)" stroke="white" stroke-width="2"/>
                        <defs>
                            <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <text x="50" y="60" font-size="40" fill="white" text-anchor="middle">‚úàÔ∏è</text>
                    </svg>
                    <h1 class="welcome-title">TripMind</h1>
                </div>
                
                <p class="welcome-tagline">Your Intelligent Travel Companion</p>
                
                <div class="welcome-features-mini">
                    <div class="mini-feature" onclick="showFeatureExplanation('ai')">
                        <span class="mini-icon">ü§ñ</span>
                        <span>AI-Powered Planning</span>
                    </div>
                    <div class="mini-feature" onclick="showFeatureExplanation('booking')">
                        <span class="mini-icon">‚úàÔ∏è</span>
                        <span>Smart Booking</span>
                    </div>
                    <div class="mini-feature" onclick="showFeatureExplanation('budget')">
                        <span class="mini-icon">üí∞</span>
                        <span>Budget Optimization</span>
                    </div>
                </div>
                
                <!-- Feature Explanation Tooltip -->
                <div id="feature-tooltip" class="feature-tooltip" onclick="hideFeatureExplanation()">
                    <div class="tooltip-content" onclick="event.stopPropagation()">
                        <button class="tooltip-close" onclick="hideFeatureExplanation()">√ó</button>
                        <h3 id="tooltip-title"></h3>
                        <p id="tooltip-description"></p>
                    </div>
                </div>
                
                <div class="welcome-actions">
                    <button class="btn-welcome btn-signin" onclick="navigateTo('signin')">
                        <span>Sign In</span>
                        <svg class="btn-arrow" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10 0L8.59 1.41L15.17 8H0v2h15.17l-6.58 6.59L10 18l10-9-10-9z"/>
                        </svg>
                    </button>
                    <button class="btn-welcome btn-signup" onclick="navigateTo('signup')">
                        <span>Create Account</span>
                        <svg class="btn-arrow" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10 0L8.59 1.41L15.17 8H0v2h15.17l-6.58 6.59L10 18l10-9-10-9z"/>
                        </svg>
                    </button>
                </div>
                
                <div class="welcome-info">
                    <div class="info-item">
                        <strong>10,000+</strong> Trips Planned
                    </div>
                    <div class="info-divider"></div>
                    <div class="info-item">
                        <strong>4.9‚òÖ</strong> Average Rating
                    </div>
                    <div class="info-divider"></div>
                    <div class="info-item">
                        <strong>50+</strong> Countries
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Sign In Page -->
    <div id="signin-page" class="page">
        <div class="auth-container">
            <div class="auth-left">
                <div class="auth-visual">
                    <div class="visual-icon">‚úàÔ∏è</div>
                    <h2 class="visual-title">Welcome Back!</h2>
                    <p class="visual-subtitle">Continue your journey to discover amazing destinations</p>
                    <div class="visual-features">
                        <div class="visual-feature">‚úì AI-Powered Itineraries</div>
                        <div class="visual-feature">‚úì Personalized Recommendations</div>
                        <div class="visual-feature">‚úì Secure Booking System</div>
                        <div class="visual-feature">‚úì 24/7 Travel Support</div>
                    </div>
                </div>
            </div>
            
            <div class="auth-right">
                <div class="auth-form-container">
                    <button class="btn-back" onclick="navigateTo('welcome')">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10 20L11.41 18.59L4.83 12H20v-2H4.83l6.58-6.59L10 2 0 11l10 9z"/>
                        </svg>
                        Back
                    </button>
                    
                    <h2 class="auth-title">Sign In</h2>
                    <p class="auth-subtitle">Enter your credentials to access your account</p>
                    
                    <form class="auth-form" onsubmit="handleSignIn(event)">
                        <div class="form-group-auth">
                            <label for="signin-email">Email Address</label>
                            <input type="email" id="signin-email" class="auth-input" placeholder="you@example.com" required>
                        </div>
                        
                        <div class="form-group-auth">
                            <label for="signin-password">Password</label>
                            <input type="password" id="signin-password" class="auth-input" placeholder="Enter your password" required>
                        </div>
                        
                        <div class="form-options">
                            <label class="checkbox-label">
                                <input type="checkbox" id="remember-me">
                                <span>Remember me</span>
                            </label>
                            <a href="#" class="link-forgot">Forgot password?</a>
                        </div>
                        
                        <button type="submit" class="btn-submit">
                            <span>Sign In</span>
                            <div class="btn-spinner" style="display: none;"></div>
                        </button>
                    </form>
                    
                    <div class="auth-divider">
                        <span>or continue with</span>
                    </div>
                    
                    <div class="social-buttons">
                        <button class="btn-social" onclick="alert('Google sign-in coming soon!')">
                            <svg width="20" height="20" viewBox="0 0 20 20">
                                <path fill="#4285F4" d="M19.6 10.2c0-.7-.1-1.4-.2-2H10v3.8h5.4c-.2 1.2-1 2.2-2 2.9v2.5h3.2c1.9-1.7 3-4.3 3-7.2z"/>
                                <path fill="#34A853" d="M10 20c2.7 0 4.9-.9 6.6-2.4l-3.2-2.5c-.9.6-2 1-3.4 1-2.6 0-4.8-1.8-5.6-4.1H1.1v2.6C2.8 17.9 6.1 20 10 20z"/>
                                <path fill="#FBBC05" d="M4.4 12c-.2-.6-.3-1.3-.3-2s.1-1.4.3-2V5.4H1.1C.4 6.8 0 8.4 0 10s.4 3.2 1.1 4.6l3.3-2.6z"/>
                                <path fill="#EA4335" d="M10 3.9c1.5 0 2.8.5 3.8 1.5l2.9-2.9C15 .9 12.7 0 10 0 6.1 0 2.8 2.1 1.1 5.4l3.3 2.6C5.2 5.7 7.4 3.9 10 3.9z"/>
                            </svg>
                            Google
                        </button>
                        <button class="btn-social" onclick="alert('GitHub sign-in coming soon!')">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10 0C4.5 0 0 4.5 0 10c0 4.4 2.9 8.2 6.8 9.5.5.1.7-.2.7-.5v-1.7c-2.8.6-3.4-1.3-3.4-1.3-.5-1.1-1.1-1.4-1.1-1.4-.9-.6.1-.6.1-.6 1 .1 1.5 1 1.5 1 .9 1.5 2.3 1.1 2.9.8.1-.6.3-1.1.6-1.3-2.2-.3-4.6-1.1-4.6-4.9 0-1.1.4-2 1-2.7-.1-.2-.4-1.2.1-2.5 0 0 .8-.3 2.7 1 .8-.2 1.7-.3 2.5-.3.8 0 1.7.1 2.5.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.5.6.7 1 1.6 1 2.7 0 3.8-2.3 4.7-4.6 4.9.4.3.7.9.7 1.9v2.8c0 .3.2.6.7.5 4-1.3 6.8-5.1 6.8-9.5 0-5.5-4.5-10-10-10z"/>
                            </svg>
                            GitHub
                        </button>
                    </div>
                    
                    <p class="auth-switch">
                        Don't have an account? <a href="#" onclick="navigateTo('signup'); return false;">Sign up</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Sign Up Page -->
    <div id="signup-page" class="page">
        <div class="auth-container">
            <div class="auth-left">
                <div class="auth-visual">
                    <div class="visual-icon">üöÄ</div>
                    <h2 class="visual-title">Start Your Journey!</h2>
                    <p class="visual-subtitle">Join thousands of travelers planning their dream vacations</p>
                    <div class="visual-features">
                        <div class="visual-feature">‚úì Completely Free to Start</div>
                        <div class="visual-feature">‚úì AI-Powered Trip Planning</div>
                        <div class="visual-feature">‚úì Instant Itinerary Generation</div>
                        <div class="visual-feature">‚úì Secure Payment Processing</div>
                    </div>
                </div>
            </div>
            
            <div class="auth-right">
                <div class="auth-form-container">
                    <button class="btn-back" onclick="navigateTo('welcome')">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10 20L11.41 18.59L4.83 12H20v-2H4.83l6.58-6.59L10 2 0 11l10 9z"/>
                        </svg>
                        Back
                    </button>
                    
                    <h2 class="auth-title">Create Account</h2>
                    <p class="auth-subtitle">Sign up to start planning your perfect trip</p>
                    
                    <form class="auth-form" onsubmit="handleSignUp(event)">
                        <div class="form-group-auth">
                            <label for="signup-name">Full Name</label>
                            <input type="text" id="signup-name" class="auth-input" placeholder="John Doe" required>
                        </div>
                        
                        <div class="form-group-auth">
                            <label for="signup-email">Email Address</label>
                            <input type="email" id="signup-email" class="auth-input" placeholder="you@example.com" required>
                        </div>
                        
                        <div class="form-group-auth">
                            <label for="signup-password">Password</label>
                            <input type="password" id="signup-password" class="auth-input" placeholder="Create a strong password" required minlength="8">
                            <small class="input-hint">At least 8 characters</small>
                        </div>
                        
                        <div class="form-group-auth">
                            <label for="signup-confirm-password">Confirm Password</label>
                            <input type="password" id="signup-confirm-password" class="auth-input" placeholder="Confirm your password" required>
                        </div>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="terms-agree" required>
                            <span>I agree to the <a href="#" class="link-inline">Terms of Service</a> and <a href="#" class="link-inline">Privacy Policy</a></span>
                        </label>
                        
                        <button type="submit" class="btn-submit">
                            <span>Create Account</span>
                            <div class="btn-spinner" style="display: none;"></div>
                        </button>
                    </form>
                    
                    <div class="auth-divider">
                        <span>or sign up with</span>
                    </div>
                    
                    <div class="social-buttons">
                        <button class="btn-social" onclick="alert('Google sign-up coming soon!')">
                            <svg width="20" height="20" viewBox="0 0 20 20">
                                <path fill="#4285F4" d="M19.6 10.2c0-.7-.1-1.4-.2-2H10v3.8h5.4c-.2 1.2-1 2.2-2 2.9v2.5h3.2c1.9-1.7 3-4.3 3-7.2z"/>
                                <path fill="#34A853" d="M10 20c2.7 0 4.9-.9 6.6-2.4l-3.2-2.5c-.9.6-2 1-3.4 1-2.6 0-4.8-1.8-5.6-4.1H1.1v2.6C2.8 17.9 6.1 20 10 20z"/>
                                <path fill="#FBBC05" d="M4.4 12c-.2-.6-.3-1.3-.3-2s.1-1.4.3-2V5.4H1.1C.4 6.8 0 8.4 0 10s.4 3.2 1.1 4.6l3.3-2.6z"/>
                                <path fill="#EA4335" d="M10 3.9c1.5 0 2.8.5 3.8 1.5l2.9-2.9C15 .9 12.7 0 10 0 6.1 0 2.8 2.1 1.1 5.4l3.3 2.6C5.2 5.7 7.4 3.9 10 3.9z"/>
                            </svg>
                            Google
                        </button>
                        <button class="btn-social" onclick="alert('GitHub sign-up coming soon!')">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10 0C4.5 0 0 4.5 0 10c0 4.4 2.9 8.2 6.8 9.5.5.1.7-.2.7-.5v-1.7c-2.8.6-3.4-1.3-3.4-1.3-.5-1.1-1.1-1.4-1.1-1.4-.9-.6.1-.6.1-.6 1 .1 1.5 1 1.5 1 .9 1.5 2.3 1.1 2.9.8.1-.6.3-1.1.6-1.3-2.2-.3-4.6-1.1-4.6-4.9 0-1.1.4-2 1-2.7-.1-.2-.4-1.2.1-2.5 0 0 .8-.3 2.7 1 .8-.2 1.7-.3 2.5-.3.8 0 1.7.1 2.5.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.5.6.7 1 1.6 1 2.7 0 3.8-2.3 4.7-4.6 4.9.4.3.7.9.7 1.9v2.8c0 .3.2.6.7.5 4-1.3 6.8-5.1 6.8-9.5 0-5.5-4.5-10-10-10z"/>
                            </svg>
                            GitHub
                        </button>
                    </div>
                    
                    <p class="auth-switch">
                        Already have an account? <a href="#" onclick="navigateTo('signin'); return false;">Sign in</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Navigation Bar -->
    <nav class="navbar" id="main-navbar" style="display: none;">
        <div class="nav-container">
            <div class="nav-logo" onclick="navigateTo('home')">
                ‚úàÔ∏è TripMind
            </div>
            <ul class="nav-links">
                <li class="nav-link active" data-page="home" onclick="navigateTo('home')">Home</li>
                <li class="nav-link" data-page="plan" onclick="navigateTo('plan')">Plan Trip</li>
                <li class="nav-link" data-page="calendar" onclick="navigateTo('calendar')">Calendar</li>
                <li class="nav-link" data-page="trips" onclick="navigateTo('trips')">My Trips</li>
                <li class="nav-link nav-booking" data-page="booking" onclick="openBookingPageFromChat()" style="background: var(--gradient-1); color: white; border-radius: 25px; padding: 0.5rem 1.5rem; font-weight: 600;">Book Now</li>
                <li class="nav-link" data-page="preferences" onclick="navigateTo('preferences')">Preferences</li>
                <li class="nav-link" data-page="settings" onclick="navigateTo('settings')" title="Settings">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"></path>
                    </svg>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Home Page -->
    <div id="home-page" class="page active">
        <section class="hero">
            <div class="hero-content">
                <h1 class="hero-title">Plan Your Dream Vacation</h1>
                <p class="hero-subtitle">
                    Powered by AI, designed for you. Let our autonomous travel agent create the perfect itinerary in seconds.
                </p>
                <div class="hero-buttons">
                    <button class="btn btn-primary" onclick="navigateTo('plan')">
                        Start Planning
                    </button>
                    <button class="btn btn-secondary" onclick="navigateTo('preferences')">
                        Set Preferences
                    </button>
                </div>
            </div>
        </section>

        <section class="features">
            <div class="container">
                <h2 class="section-title gradient-text">Why Choose Our AI Travel Planner?</h2>
                <div class="features-grid" style="animation: fadeInUp 0.8s ease-out;">
                    <div class="feature-card">
                        <div class="feature-icon">ü§ñ</div>
                        <h3 class="feature-title">Autonomous AI Agent</h3>
                        <p class="feature-desc">
                            Our AI independently researches, plans, and optimizes your entire trip using advanced reasoning and decision-making.
                        </p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üí∞</div>
                        <h3 class="feature-title">Budget Optimization</h3>
                        <p class="feature-desc">
                            Get the best value for your money with smart budget allocation across flights, hotels, and activities.
                        </p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üß†</div>
                        <h3 class="feature-title">Remembers Your Style</h3>
                        <p class="feature-desc">
                            The AI learns and remembers your preferences to make every future trip planning even better and faster.
                        </p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">‚úàÔ∏è</div>
                        <h3 class="feature-title">Complete Itineraries</h3>
                        <p class="feature-desc">
                            Get detailed day-by-day plans with flights, hotels, activities, and local recommendations all in one place.
                        </p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üå§Ô∏è</div>
                        <h3 class="feature-title">Weather-Smart Planning</h3>
                        <p class="feature-desc">
                            AI checks weather forecasts and suggests the best times to visit your destination for optimal experience.
                        </p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üéØ</div>
                        <h3 class="feature-title">Personalized Activities</h3>
                        <p class="feature-desc">
                            Discover activities and attractions tailored to your interests, from adventure to culture to relaxation.
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Plan Trip Page - Full Page Redesign -->
    <div id="plan-page" class="page plan-trip-fullpage">
        <!-- Split Layout Container -->
        <div class="plan-split-container">
            <!-- Left Side - Chat Interface -->
            <div class="plan-chat-side">
                <div class="plan-chat-header">
                    <div class="plan-header-content">
                        <div class="plan-header-title">
                            <svg class="plan-ai-icon" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="32" cy="32" r="30" fill="url(#headerGradient)" opacity="0.2"/>
                                <path d="M32 12C20.954 12 12 20.954 12 32s8.954 20 20 20 20-8.954 20-20S43.046 12 32 12zm0 36c-8.837 0-16-7.163-16-16s7.163-16 16-16 16 7.163 16 16-7.163 16-16 16z" fill="url(#headerGradient)"/>
                                <circle cx="24" cy="28" r="3" fill="url(#headerGradient)"/>
                                <circle cx="40" cy="28" r="3" fill="url(#headerGradient)"/>
                                <path d="M32 36c-3.314 0-6-2.686-6-6h2c0 2.206 1.794 4 4 4s4-1.794 4-4h2c0 3.314-2.686 6-6 6z" fill="url(#headerGradient)"/>
                                <defs>
                                    <linearGradient id="headerGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                                    </linearGradient>
                                </defs>
                            </svg>
                            <div>
                                <h1>AI Travel Assistant</h1>
                                <p>Powered by advanced autonomous AI</p>
                            </div>
                        </div>
                        <button class="plan-clear-btn" onclick="clearChat()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <path d="M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" fill="currentColor"/>
                            </svg>
                            Clear
                        </button>
                    </div>
                </div>
                
                <div class="plan-chat-messages" id="chat-messages">
                    <!-- Welcome State -->
                    <div class="plan-welcome-state" id="welcome-state">
                        <div class="welcome-icon-pulse">
                            <svg width="80" height="80" viewBox="0 0 64 64" fill="none">
                                <circle cx="32" cy="32" r="28" fill="url(#welcomeGrad)" opacity="0.1"/>
                                <path d="M32 8L36 20L48 16L40 28L52 32L40 36L48 48L36 44L32 56L28 44L16 48L24 36L12 32L24 28L16 16L28 20L32 8Z" fill="url(#welcomeGrad)"/>
                                <defs>
                                    <linearGradient id="welcomeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#667eea"/>
                                        <stop offset="100%" style="stop-color:#764ba2"/>
                                    </linearGradient>
                                </defs>
                            </svg>
                        </div>
                        <h2>Start Your Journey</h2>
                        <p>Tell me where you want to go, and I'll craft the perfect itinerary for you</p>
                        <div class="welcome-suggestions">
                            <button class="suggestion-chip" onclick="document.getElementById('chat-input').value = 'Plan a 5-day beach vacation in Bali under $1200 in March'; document.getElementById('welcome-state').style.display='none';">üèùÔ∏è Beach Paradise</button>
                            <button class="suggestion-chip" onclick="document.getElementById('chat-input').value = 'Weekend mountain adventure in Swiss Alps for hiking and nature'; document.getElementById('welcome-state').style.display='none';">‚õ∞Ô∏è Mountain Escape</button>
                            <button class="suggestion-chip" onclick="document.getElementById('chat-input').value = 'Cultural city tour of Tokyo with food, temples, and shopping, 7 days'; document.getElementById('welcome-state').style.display='none';">üèôÔ∏è City Explorer</button>
                            <button class="suggestion-chip" onclick="document.getElementById('welcome-state').style.display='none'; document.getElementById('chat-input').focus();">‚ú® Others</button>
                        </div>
                    </div>
                </div>
                
                <div class="plan-chat-input-area">
                    <div class="plan-quick-actions">
                        <span class="quick-chip" onclick="document.getElementById('chat-input').value = 'Plan a romantic getaway for 2 in Santorini, 5 days, budget $2000'">üíë Romantic</span>
                        <span class="quick-chip" onclick="document.getElementById('chat-input').value = 'Budget backpacking across Thailand for 2 weeks under $800'">üéí Backpacking</span>
                        <span class="quick-chip" onclick="document.getElementById('chat-input').value = 'Luxury wellness retreat in Bali, 7 days, spa and yoga'">üßò Wellness</span>
                        <span class="quick-chip" onclick="document.getElementById('chat-input').value = 'What are my saved preferences?'">‚öôÔ∏è Preferences</span>
                    </div>
                    <div class="plan-input-container">
                        <input 
                            type="text" 
                            id="chat-input" 
                            class="plan-chat-input"
                            placeholder="Describe your dream trip... (e.g., 5-day beach getaway in Maldives under $2000)"
                            onkeypress="if(event.key === 'Enter') sendMessage()"
                        />
                        <button id="send-btn" class="plan-send-btn" onclick="sendMessage()">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" fill="currentColor"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Right Side - Dynamic Graphics -->
            <div class="plan-graphics-side">
                <div class="plan-graphics-content">
                    <!-- Animated Travel Illustration -->
                    <div class="travel-illustration">
                        <svg class="travel-svg" viewBox="0 0 500 500" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Sky -->
                            <rect width="500" height="500" fill="url(#skyGradient)"/>
                            
                            <!-- Sun -->
                            <circle cx="400" cy="100" r="50" fill="#FDB813" opacity="0.8">
                                <animate attributeName="r" values="50;55;50" dur="3s" repeatCount="indefinite"/>
                            </circle>
                            
                            <!-- Clouds -->
                            <g class="cloud cloud-1">
                                <ellipse cx="100" cy="80" rx="40" ry="20" fill="white" opacity="0.7"/>
                                <ellipse cx="120" cy="75" rx="50" ry="25" fill="white" opacity="0.7"/>
                                <ellipse cx="140" cy="80" rx="40" ry="20" fill="white" opacity="0.7"/>
                            </g>
                            <g class="cloud cloud-2">
                                <ellipse cx="300" cy="120" rx="35" ry="18" fill="white" opacity="0.6"/>
                                <ellipse cx="320" cy="115" rx="45" ry="22" fill="white" opacity="0.6"/>
                                <ellipse cx="335" cy="120" rx="35" ry="18" fill="white" opacity="0.6"/>
                            </g>
                            
                            <!-- Mountains -->
                            <path d="M0 400 L100 250 L200 350 L300 200 L400 300 L500 250 L500 500 L0 500 Z" fill="url(#mountainGrad)"/>
                            
                            <!-- Airplane -->
                            <g class="airplane">
                                <path d="M250 150 L260 148 L280 155 L285 150 L283 145 L270 140 L250 145 Z" fill="#667eea"/>
                                <ellipse cx="265" cy="150" rx="8" ry="4" fill="white" opacity="0.5"/>
                                <path d="M250 150 L240 145 L250 145 Z" fill="#764ba2"/>
                                <path d="M280 155 L285 165 L283 165 L278 157 Z" fill="#764ba2"/>
                                <path d="M250 145 L245 135 L247 135 L252 143 Z" fill="#764ba2"/>
                            </g>
                            
                            <!-- Palm Tree -->
                            <g class="palm-tree">
                                <rect x="370" y="350" width="8" height="80" fill="#8B4513"/>
                                <path d="M374 350 Q360 330 350 340 Q365 345 374 350" fill="#228B22"/>
                                <path d="M374 350 Q388 330 398 340 Q383 345 374 350" fill="#228B22"/>
                                <path d="M374 350 Q370 320 360 325 Q370 335 374 350" fill="#2E8B57"/>
                                <path d="M374 350 Q378 320 388 325 Q378 335 374 350" fill="#2E8B57"/>
                            </g>
                            
                            <!-- Beach -->
                            <path d="M0 420 Q100 410 200 420 T400 420 T500 430 L500 500 L0 500 Z" fill="#F4E4C1"/>
                            
                            <!-- Waves -->
                            <path class="wave wave-1" d="M0 400 Q50 395 100 400 T200 400 T300 400 T400 400 T500 400" stroke="#4A9EFF" stroke-width="2" fill="none" opacity="0.6"/>
                            <path class="wave wave-2" d="M0 410 Q50 405 100 410 T200 410 T300 410 T400 410 T500 410" stroke="#4A9EFF" stroke-width="2" fill="none" opacity="0.4"/>
                            
                            <!-- Gradients -->
                            <defs>
                                <linearGradient id="skyGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#87CEEB"/>
                                    <stop offset="100%" style="stop-color:#B0E0E6"/>
                                </linearGradient>
                                <linearGradient id="mountainGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#8B7355"/>
                                    <stop offset="100%" style="stop-color:#A0826D"/>
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    
                    <!-- Stats Cards -->
                    <div class="plan-stats-grid">
                        <div class="stat-card stat-1">
                            <div class="stat-icon">üåç</div>
                            <div class="stat-content">
                                <div class="stat-number">150+</div>
                                <div class="stat-label">Countries</div>
                            </div>
                        </div>
                        <div class="stat-card stat-2">
                            <div class="stat-icon">‚úàÔ∏è</div>
                            <div class="stat-content">
                                <div class="stat-number">50k+</div>
                                <div class="stat-label">Trips Planned</div>
                            </div>
                        </div>
                        <div class="stat-card stat-3">
                            <div class="stat-icon">‚≠ê</div>
                            <div class="stat-content">
                                <div class="stat-number">4.9</div>
                                <div class="stat-label">Rating</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Testimonial Quote -->
                    <div class="plan-testimonial">
                        <div class="quote-icon">"</div>
                        <p class="quote-text">The AI understood exactly what I wanted. Best trip planning experience ever!</p>
                        <div class="quote-author">‚Äî Sarah M., traveled to 12 countries</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Calendar Page -->
    <div id="calendar-page" class="page">
        <div class="container" style="padding: 2rem;">
            <!-- Calendar Header -->
            <div class="calendar-page-header">
                <div class="calendar-header-left">
                    <h1 class="calendar-main-title">üìÖ Calendar</h1>
                    <p class="calendar-subtitle">Manage your trips, bookings, and personal events</p>
                </div>
                <div class="calendar-header-actions">
                    <button class="calendar-action-btn calendar-today-btn" onclick="goToToday()" title="Go to today">
                        <span>Today</span>
                    </button>
                    <button class="calendar-action-btn calendar-add-btn" onclick="openEventModal()" title="Create event">
                        <span>‚ûï</span>
                        <span>Create</span>
                    </button>
                </div>
            </div>
            
            <!-- Calendar View Selector -->
            <div class="calendar-view-selector">
                <button class="view-btn active" data-view="month" onclick="switchCalendarView('dayGridMonth')">
                    <span>Month</span>
                </button>
                <button class="view-btn" data-view="week" onclick="switchCalendarView('timeGridWeek')">
                    <span>Week</span>
                </button>
                <button class="view-btn" data-view="day" onclick="switchCalendarView('timeGridDay')">
                    <span>Day</span>
                </button>
                <button class="view-btn" data-view="list" onclick="switchCalendarView('listWeek')">
                    <span>List</span>
                </button>
            </div>
            
            <!-- Calendar Wrapper -->
            <div id="calendar-wrapper" class="calendar-wrapper">
                <div id="calendar-container" class="calendar-container"></div>
            </div>
            
            <!-- Quick Stats -->
            <div class="calendar-stats">
                <div class="stat-card">
                    <div class="stat-icon">üìÖ</div>
                    <div class="stat-info">
                        <div class="stat-value" id="total-events-count">0</div>
                        <div class="stat-label">Total Events</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úàÔ∏è</div>
                    <div class="stat-info">
                        <div class="stat-value" id="booking-events-count">0</div>
                        <div class="stat-label">Bookings</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üîî</div>
                    <div class="stat-info">
                        <div class="stat-value" id="upcoming-events-count">0</div>
                        <div class="stat-label">Upcoming</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Event Creation/Edit Modal -->
    <div id="event-modal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 id="event-modal-title">‚ûï Create New Event</h3>
                <button class="modal-close" onclick="closeEventModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="event-form" onsubmit="saveEvent(event)">
                    <div class="form-group">
                        <label>Event Title *</label>
                        <input type="text" id="event-title" class="form-input" required placeholder="e.g., Goa Trip, Team Meeting">
                    </div>
                    
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="event-description" class="form-input" rows="3" placeholder="Add notes or details about this event..."></textarea>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div class="form-group">
                            <label>Start Date *</label>
                            <input type="date" id="event-start-date" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label>End Date *</label>
                            <input type="date" id="event-end-date" class="form-input" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="event-all-day" checked onchange="toggleEventTime()">
                            All Day Event
                        </label>
                    </div>
                    
                    <div id="event-time-fields" style="display: none; grid-template-columns: 1fr 1fr; gap: 1rem; display: grid;">
                        <div class="form-group">
                            <label id="event-start-time-label">Start Time *</label>
                            <input type="time" id="event-start-time" class="form-input">
                        </div>
                        <div class="form-group">
                            <label id="event-end-time-label">End Time *</label>
                            <input type="time" id="event-end-time" class="form-input">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Event Type</label>
                        <select id="event-type" class="form-input" onchange="updateEventColor()">
                            <option value="personal">Personal</option>
                            <option value="trip">Trip</option>
                            <option value="booking">Booking</option>
                            <option value="reminder">Reminder</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Tags (comma-separated)</label>
                        <input type="text" id="event-tags" class="form-input" placeholder="e.g., Trip, Reminder, Personal">
                    </div>
                    
                    <div class="form-group">
                        <label>Color</label>
                        <div style="display: flex; gap: 0.5rem; align-items: center;">
                            <input type="color" id="event-color" class="form-input" value="#6366f1" style="width: 60px; height: 40px; padding: 0;">
                            <input type="text" id="event-color-text" class="form-input" value="#6366f1" style="flex: 1;">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="event-reminder">
                            Enable Reminder
                        </label>
                    </div>
                    
                    <div id="reminder-options" style="display: none;">
                        <div class="form-group">
                            <label>Reminder Time</label>
                            <select id="event-reminder-time" class="form-input">
                                <option value="15 minutes before">15 minutes before</option>
                                <option value="30 minutes before">30 minutes before</option>
                                <option value="1 hour before">1 hour before</option>
                                <option value="2 hours before">2 hours before</option>
                                <option value="1 day before">1 day before</option>
                                <option value="2 days before">2 days before</option>
                                <option value="1 week before">1 week before</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button type="submit" class="btn btn-primary" style="flex: 1;">üíæ Save Event</button>
                        <button type="button" class="btn btn-secondary" onclick="closeEventModal()" style="flex: 1;">Cancel</button>
                        <button type="button" id="event-delete-btn" class="btn btn-delete" onclick="deleteEvent()" style="display: none;">üóëÔ∏è Delete</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- My Trips Page -->
    <div id="trips-page" class="page">
        <div class="container" style="padding: 3rem 2rem;">
            <h2 class="section-title">My Travel Plans</h2>
            <p class="trips-subtitle">Your personalized journeys, ready to book and explore</p>
            <div class="trips-grid">
                <div class="trip-card">
                    <div class="trip-image">üèñÔ∏è</div>
                    <div class="trip-content">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                            <h3 class="trip-title">Goa Beach Vacation</h3>
                            <span class="badge badge-primary">Ready to Book</span>
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.95rem; margin-bottom: 1rem;">
                            üìç Goa, India
                        </div>
                        <div class="trip-meta" style="margin-bottom: 1rem;">
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <span>üìÖ Dec 15-20, 2024</span>
                                <span>‚è±Ô∏è 5 days</span>
                                <span>üë• 2 people</span>
                            </div>
                        </div>
                        <p class="feature-desc" style="margin-bottom: 1rem;">
                            5-day relaxing beach getaway with water sports, local cuisine tours, and sunset cruises along the beautiful Arabian Sea coast.
                        </p>
                        <div style="margin-bottom: 1rem; padding: 1rem; background: rgba(99, 102, 241, 0.05); border-radius: 10px;">
                            <div style="font-weight: 600; color: var(--primary); margin-bottom: 0.5rem;">‚ú® Highlights</div>
                            <ul style="margin: 0; padding-left: 1.25rem; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8;">
                                <li>Beach hopping & water sports</li>
                                <li>Local seafood experiences</li>
                                <li>Sunset cruise on Arabian Sea</li>
                            </ul>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <div>
                                <div style="font-size: 0.85rem; color: var(--text-secondary);">Total Price</div>
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">$450</div>
                            </div>
                            <button class="btn btn-primary" onclick="openBookingModal('goa-beach', 'Goa Beach Vacation', 'Goa, India', '2024-12-15', '2024-12-20', 450)">
                                üí≥ Book Now
                            </button>
                        </div>
                    </div>
                </div>

                <div class="trip-card">
                    <div class="trip-image" style="background: var(--gradient-2);">üóº</div>
                    <div class="trip-content">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                            <h3 class="trip-title">Paris Family Trip</h3>
                            <span class="badge badge-primary">Ready to Book</span>
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.95rem; margin-bottom: 1rem;">
                            üìç Paris, France
                        </div>
                        <div class="trip-meta" style="margin-bottom: 1rem;">
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <span>üìÖ July 10-17, 2025</span>
                                <span>‚è±Ô∏è 7 days</span>
                                <span>üë• 4 people</span>
                            </div>
                        </div>
                        <p class="feature-desc" style="margin-bottom: 1rem;">
                            Week-long cultural exploration with world-class museums, authentic French cooking classes, and a romantic Seine river cruise through the heart of Paris.
                        </p>
                        <div style="margin-bottom: 1rem; padding: 1rem; background: rgba(99, 102, 241, 0.05); border-radius: 10px;">
                            <div style="font-weight: 600; color: var(--primary); margin-bottom: 0.5rem;">‚ú® Highlights</div>
                            <ul style="margin: 0; padding-left: 1.25rem; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8;">
                                <li>Louvre & Eiffel Tower visits</li>
                                <li>French cooking masterclass</li>
                                <li>Seine river dinner cruise</li>
                            </ul>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <div>
                                <div style="font-size: 0.85rem; color: var(--text-secondary);">Total Price</div>
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">$3,000</div>
                            </div>
                            <button class="btn btn-primary" onclick="openBookingModal('paris-family', 'Paris Family Trip', 'Paris, France', '2025-07-10', '2025-07-17', 750)">
                                üí≥ Book Now
                            </button>
                        </div>
                    </div>
                </div>

                <div class="trip-card">
                    <div class="trip-image" style="background: var(--gradient-3);">‚õ∞Ô∏è</div>
                    <div class="trip-content">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
                            <h3 class="trip-title">Manali Adventure</h3>
                            <span class="badge badge-primary">Ready to Book</span>
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.95rem; margin-bottom: 1rem;">
                            üìç Manali, India
                        </div>
                        <div class="trip-meta" style="margin-bottom: 1rem;">
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <span>üìÖ March 5-7, 2025</span>
                                <span>‚è±Ô∏è 3 days</span>
                                <span>üë• Solo</span>
                            </div>
                        </div>
                        <p class="feature-desc" style="margin-bottom: 1rem;">
                            Weekend trekking and camping adventure in the majestic Himalayas with experienced local guides and breathtaking mountain views.
                        </p>
                        <div style="margin-bottom: 1rem; padding: 1rem; background: rgba(99, 102, 241, 0.05); border-radius: 10px;">
                            <div style="font-weight: 600; color: var(--primary); margin-bottom: 0.5rem;">‚ú® Highlights</div>
                            <ul style="margin: 0; padding-left: 1.25rem; color: var(--text-secondary); font-size: 0.9rem; line-height: 1.8;">
                                <li>Mountain trekking trails</li>
                                <li>Camping under the stars</li>
                                <li>Expert local guides included</li>
                            </ul>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <div>
                                <div style="font-size: 0.85rem; color: var(--text-secondary);">Total Price</div>
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">$200</div>
                            </div>
                            <button class="btn btn-primary" onclick="openBookingModal('manali-adventure', 'Manali Adventure', 'Manali, India', '2025-03-05', '2025-03-07', 200)">
                                üí≥ Book Now
                            </button>
                        </div>
                    </div>
                </div>

                <div class="trip-card" style="border: 2px dashed var(--primary); background: rgba(99, 102, 241, 0.05);">
                    <div class="trip-image" style="background: rgba(99, 102, 241, 0.1); color: var(--primary);">‚ûï</div>
                    <div class="trip-content" style="text-align: center;">
                        <h3 class="trip-title" style="color: var(--primary);">Plan New Trip</h3>
                        <p class="feature-desc" style="margin: 1rem 0;">
                            Ready for your next adventure? Let our AI help you plan the perfect trip!
                        </p>
                        <button class="btn btn-primary" onclick="navigateTo('plan')">
                            Start Planning
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Page -->
    <div id="booking-page" class="page">
        <div class="container" style="padding: 2rem; padding-bottom: 120px;">
            <div style="margin-bottom: 2rem;">
                <button class="btn btn-secondary" onclick="navigateTo('plan')" style="margin-bottom: 1rem;">
                    ‚Üê Back to Planning
                </button>
                <h2 class="section-title">Complete Your Booking</h2>
                <p class="feature-desc" id="booking-summary">Select your flights and hotel to complete your booking</p>
            </div>

            <!-- Booking Details Summary -->
            <div class="booking-summary-card" id="booking-details-card" style="display: none;">
                <h3 style="margin-bottom: 1rem; color: var(--primary);">üìã Trip Summary</h3>
                <div class="booking-summary-content" id="booking-summary-content"></div>
            </div>

            <!-- Flight Selection Section -->
            <div class="booking-section">
                <h3 class="booking-section-title">‚úàÔ∏è Select Your Flight</h3>
                <div id="flights-container" class="options-container">
                    <div class="loading-container">
                        <div class="loading-spinner-large"></div>
                        <p style="margin-top: 1rem; color: var(--gray);">Loading flight options...</p>
                    </div>
                </div>
            </div>

            <!-- Hotel Selection Section -->
            <div class="booking-section" style="margin-top: 3rem;">
                <h3 class="booking-section-title">üè® Select Your Hotel</h3>
                <div id="hotels-container" class="options-container">
                    <div class="loading-container">
                        <div class="loading-spinner-large"></div>
                        <p style="margin-top: 1rem; color: var(--gray);">Loading hotel options...</p>
                    </div>
                </div>
            </div>

            <!-- Passenger Details -->
            <div class="booking-section" style="margin-top: 3rem;">
                <h3 class="booking-section-title">üë• Passenger Details</h3>
                <div class="passenger-form">
                    <div class="form-group">
                        <label>Number of Passengers</label>
                        <input type="number" id="passenger-count" min="1" max="10" value="1" class="form-input" onchange="updateTotalPrice()">
                    </div>
                    <div class="form-group">
                        <label>Email Address <span style="color: var(--danger);">*</span></label>
                        <input type="email" id="passenger-email" placeholder="your.email@example.com" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label>Special Requests (Optional)</label>
                        <textarea id="special-requests" placeholder="Any special requests or preferences..." class="form-input" rows="3"></textarea>
                    </div>
                </div>
            </div>

        </div>
        
        <!-- Collapsible Price Summary Footer -->
        <div class="price-summary-footer" id="price-summary-footer">
            <div class="price-summary-toggle" onclick="togglePriceSummary()">
                <div class="toggle-content">
                    <span class="toggle-icon">üí∞</span>
                    <span class="toggle-text">View Price Summary</span>
                    <span class="toggle-total" id="footer-total-price">Total: $0.00</span>
                </div>
                <span class="toggle-arrow" id="price-summary-arrow">‚ñº</span>
            </div>
            <div class="price-summary-content" id="price-summary-content">
                <div class="price-summary-card">
                    <h3 style="margin-bottom: 1rem; color: var(--primary);">üí∞ Price Summary</h3>
                    <div class="price-breakdown">
                        <div class="price-row">
                            <span>Flight (per person)</span>
                            <div class="price-dropdown">
                                <select id="flight-select" class="price-select" onchange="updateFlightPrice()">
                                    <option value="">Select Flight</option>
                                </select>
                                <span id="flight-price" class="price-display">$0.00</span>
                            </div>
                        </div>
                        <div class="price-row">
                            <span>Hotel (per night)</span>
                            <div class="price-dropdown">
                                <select id="hotel-select" class="price-select" onchange="updateHotelPrice()">
                                    <option value="">Select Hotel</option>
                                </select>
                                <span id="hotel-price" class="price-display">$0.00</span>
                            </div>
                        </div>
                        <div class="price-row">
                            <span>Number of Nights</span>
                            <div class="price-dropdown">
                                <select id="nights-select" class="price-select" onchange="updateTotalPrice()">
                                    <option value="1">1 Night</option>
                                    <option value="2">2 Nights</option>
                                    <option value="3">3 Nights</option>
                                    <option value="4">4 Nights</option>
                                    <option value="5">5 Nights</option>
                                    <option value="6">6 Nights</option>
                                    <option value="7">7 Nights</option>
                                    <option value="8">8 Nights</option>
                                    <option value="9">9 Nights</option>
                                    <option value="10">10 Nights</option>
                                </select>
                                <span id="nights-count" class="price-display">0</span>
                            </div>
                        </div>
                        <div class="price-row">
                            <span>Number of Passengers</span>
                            <div class="price-dropdown">
                                <select id="passengers-select" class="price-select" onchange="updateTotalPrice()">
                                    <option value="1">1 Passenger</option>
                                    <option value="2">2 Passengers</option>
                                    <option value="3">3 Passengers</option>
                                    <option value="4">4 Passengers</option>
                                    <option value="5">5 Passengers</option>
                                    <option value="6">6 Passengers</option>
                                    <option value="7">7 Passengers</option>
                                    <option value="8">8 Passengers</option>
                                    <option value="9">9 Passengers</option>
                                    <option value="10">10 Passengers</option>
                                </select>
                                <span id="passengers-count" class="price-display">1</span>
                            </div>
                        </div>
                        <div class="price-row total-row">
                            <span><strong>Total Price</strong></span>
                            <span id="total-price" class="total-price-display"><strong>$0.00</strong></span>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="proceed-booking-btn" onclick="proceedToBooking()" style="width: 100%; margin-top: 1.5rem; padding: 1.2rem;" disabled>
                        üí≥ Proceed to Payment
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Preferences Page -->
    <div id="preferences-page" class="page">
        <div class="preferences-container" style="padding: 3rem 2rem;">
            <h2 class="section-title">Travel Preferences</h2>
            
            <div class="preferences-card">
                <h3 style="margin-bottom: 1.5rem; color: var(--dark);">Set Your Travel Style</h3>
                <p class="feature-desc" style="margin-bottom: 2rem;">
                    Tell us your preferences so our AI can create perfectly tailored trips for you. These settings will be remembered for all future planning.
                </p>
                
                <div class="form-group">
                    <label class="form-label">üí∞ Budget Preference</label>
                    <select id="pref-budget" class="form-select">
                        <option value="budget-friendly">Budget-Friendly (Economy)</option>
                        <option value="moderate">Moderate (Comfort)</option>
                        <option value="luxury">Luxury (Premium)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">üè® Accommodation Style</label>
                    <select id="pref-style" class="form-select">
                        <option value="hostel">Hostels & Budget Hotels</option>
                        <option value="3-star">3-Star Hotels</option>
                        <option value="4-star">4-Star Hotels</option>
                        <option value="luxury">Luxury 5-Star Hotels</option>
                        <option value="boutique">Boutique & Unique Stays</option>
                        <option value="resort">Beach/Mountain Resorts</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">üéØ Preferred Activities</label>
                    <input 
                        type="text" 
                        id="pref-activities" 
                        class="form-input"
                        placeholder="E.g., beaches, museums, adventure sports, food tours, nightlife..."
                    />
                </div>
                
                <div class="form-group">
                    <label class="form-label">üçΩÔ∏è Dietary Preferences</label>
                    <input 
                        type="text" 
                        id="pref-diet" 
                        class="form-input"
                        placeholder="E.g., vegetarian, vegan, halal, kosher, no restrictions..."
                    />
                </div>
                
                <div class="form-group">
                    <label class="form-label">‚úàÔ∏è Travel Pace</label>
                    <select id="pref-pace" class="form-select">
                        <option value="relaxed">Relaxed (2-3 activities per day)</option>
                        <option value="moderate">Moderate (3-4 activities per day)</option>
                        <option value="packed">Packed (5+ activities per day)</option>
                    </select>
                </div>
                
                <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;" onclick="savePreferencesForm()">
                    üíæ Save Preferences
                </button>
            </div>
            
            <div id="saved-preferences">
                <!-- Saved preferences will load here -->
            </div>
            
            <div class="preferences-card" style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%); border: 2px solid var(--primary);">
                <h3 style="color: var(--primary); margin-bottom: 1rem;">üí° Pro Tip</h3>
                <p class="feature-desc">
                    You can also set preferences naturally by chatting with the AI! Just say something like 
                    <i>"I prefer luxury hotels and love adventure activities"</i> and the AI will remember it.
                </p>
            </div>
        </div>
    </div>

    <!-- Settings Page -->
    <div id="settings-page" class="page">
        <div class="preferences-container" style="padding: 3rem 2rem; max-width: 900px; margin: 0 auto;">
            <h2 class="section-title">‚öôÔ∏è Settings</h2>
            
            <!-- Profile Section -->
            <div class="preferences-card">
                <h3 style="margin-bottom: 1.5rem; color: var(--dark); display: flex; align-items: center; gap: 0.5rem;">
                    <span>üë§</span> Profile Information
                </h3>
                <div style="display: flex; align-items: center; gap: 1.5rem; padding: 1.5rem; background: rgba(99, 102, 241, 0.05); border-radius: 12px;">
                    <div class="profile-avatar-large">
                        <span id="settings-page-initials">U</span>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-size: 1.2rem; font-weight: 600; color: var(--text-primary); margin-bottom: 0.25rem;" id="settings-page-name">User Name</div>
                        <div style="color: var(--text-secondary); font-size: 0.95rem;" id="settings-page-email">user@example.com</div>
                    </div>
                </div>
            </div>

            <!-- Appearance Section -->
            <div class="preferences-card">
                <h3 style="margin-bottom: 1.5rem; color: var(--dark); display: flex; align-items: center; gap: 0.5rem;">
                    <span>üé®</span> Appearance
                </h3>
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--bg-secondary); border-radius: 12px;">
                    <div>
                        <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.25rem;">Theme</div>
                        <div style="font-size: 0.9rem; color: var(--text-secondary);">Choose between light and dark mode</div>
                    </div>
                    <button class="btn btn-secondary" onclick="toggleTheme()" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1.5rem;">
                        <span id="settings-page-theme-icon">üåô</span>
                        <span>Toggle Theme</span>
                    </button>
                </div>
            </div>

            <!-- Quick Navigation Section -->
            <div class="preferences-card">
                <h3 style="margin-bottom: 1.5rem; color: var(--dark); display: flex; align-items: center; gap: 0.5rem;">
                    <span>üß≠</span> Quick Navigation
                </h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <button class="settings-nav-btn" onclick="showAccountSettings()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span>Account Settings</span>
                    </button>
                    <button class="settings-nav-btn" onclick="navigateTo('trips')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                            <circle cx="12" cy="10" r="3"></circle>
                        </svg>
                        <span>My Trips</span>
                    </button>
                    <button class="settings-nav-btn" onclick="showMyBookings()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                        </svg>
                        <span>My Bookings</span>
                    </button>
                    <button class="settings-nav-btn" onclick="navigateTo('calendar')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        <span>Calendar</span>
                    </button>
                    <button class="settings-nav-btn" onclick="navigateTo('preferences')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M12 1v6m0 6v6m8.66-15.66l-4.24 4.24m-4.24 4.24l-4.24 4.24m15.66-8.66l-4.24 4.24m-4.24 4.24l-4.24 4.24"></path>
                        </svg>
                        <span>Preferences</span>
                    </button>
                </div>
            </div>

            <!-- Account Management Section -->
            <div class="preferences-card">
                <h3 style="margin-bottom: 1.5rem; color: var(--dark); display: flex; align-items: center; gap: 0.5rem;">
                    <span>üîê</span> Account Management
                </h3>
                <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                    <button class="settings-action-btn" onclick="switchAccount()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                        <span>Switch Account</span>
                    </button>
                    <button class="settings-action-btn settings-logout-btn" onclick="logout()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                        <span>Sign Out</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Modal -->
    <div id="booking-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìù Complete Your Booking</h2>
                <button class="modal-close" onclick="closeModal('booking-modal')">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Content will be dynamically loaded -->
            </div>
        </div>
    </div>

    <!-- Toast Notification Container -->
    <div id="toast-container"></div>

    <script src="/static/app.js"></script>
</body>
</html>
